<?xml version="1.0" encoding="UTF-8"?>
<scxml xmlns="http://www.coin3d.org/scxml/coin/1.0" initialstate="idle">
  <state id="idle">
    <transition event="KeyboardEvent.DOWN.W">
      <invoke targettype="cam" src="moveForward"/>
    </transition>
    <transition event="KeyboardEvent.DOWN.S">
      <invoke targettype="cam" src="moveBackward"/>
    </transition>
    <transition event="KeyboardEvent.DOWN.A">
      <invoke targettype="cam" src="strafeLeft"/>
    </transition>
    <transition event="KeyboardEvent.DOWN.D">
      <invoke targettype="cam" src="strafeRight"/>
    </transition>
    <transition event="KeyboardEvent.DOWN.Q">
      <invoke targettype="cam" src="azimuthLeft"/>
    </transition>
    <transition event="KeyboardEvent.DOWN.E">
      <invoke targettype="cam" src="azimuthRight"/>
    </transition>
    <transition event="KeyboardEvent.DOWN.R">
      <invoke targettype="cam" src="increaseDeclination"/>
    </transition>
    <transition event="KeyboardEvent.DOWN.F">
      <invoke targettype="cam" src="decreaseDeclination"/>
    </transition>

    <transition event="MouseButtonEvent.DOWN.LEFT" target="rotate">
      <invoke targettype="cameraRotation" src="setRotate"/>
    </transition>
  </state>
  <state id="rotate">
    <initial id="rotate-initial">
      <transition target="rotate-wait"/>
    </initial>
    <state id="rotate-wait">
      <transition event="Mouse.MOVE" target="rotate-move">
        <invoke targettype="cameraRotation" src="updateRotate"/>
      </transition>
    </state>
    <state id="rotate-move">
      <transition event="Mouse.MOVE">
        <invoke targettype="cameraRotation" src="updateRotate"/>
      </transition>
    </state>
    <transition event="MouseButtonEvent.UP.LEFT" target="idle"/>
  </state>
</scxml>
